# 设备报修系统说明文档

## 1. 项目背景

本系统面向校园或社区的设备报修场景，目标是提供一个高效、透明、可追踪的工单管理流程，提升后勤服务效率并改善用户体验。

## 2. 角色与职责

- 普通用户：提交故障信息、查看工单进度、评价维修服务。
- 维修人员：接单处理、更新工单状态、签到打卡、记录维修过程。
- 管理员：派发工单、调度人员、查看数据统计与高频故障点。

## 3. 功能流程

### 3.1 用户端流程
1. 填写故障标题、描述、图片链接与位置。
2. 提交后生成工单，可在“工单列表”中查看状态变化。
3. 工单完成后可进行评价与反馈。

### 3.2 维修端流程
1. 维修人员进入工作台查看待处理工单。
2. 点击“开始处理”将工单状态置为处理中。
3. 现场打卡签到，记录签到位置与时间。
4. 处理完成后更新为“已完成”。

### 3.3 管理端流程
1. 查看统计数据（总工单、已完成、平均评分、高频故障点）。
2. 为工单派单并记录维修人员信息。
3. 根据统计数据优化人员调度与资源配置。

## 4. 自动派单与超时提醒

- **自动派单**：后端读取环境变量 `AUTO_ASSIGN_NAME` 和 `AUTO_ASSIGN_CONTACT`，自动将新工单分配给预设维修员并进入“处理中”。
- **超时提醒**：系统每小时扫描超过 24 小时未完成的工单，在后端日志输出提醒信息，可对接短信/IM 通知。

## 5. 技术架构

- 前端：Vue 3 + TypeScript + Vant，移动端优先
- 后端：NestJS + TypeORM，默认 SQLite 存储
- 数据存储：SQLite（可拓展 MySQL），后续可增加 Redis 缓存与消息队列

## 6. 本地运行

### 后端

```bash
cd backend
npm install
npm run start:dev
```

### 前端

```bash
cd frontend
npm install
npm run dev
```

## 7. 后续规划

- 加入登录、权限与多角色 RBAC 管理
- 引入工单 SLA 与通知策略
- 接入文件上传与位置地图组件

