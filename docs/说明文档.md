# 设备报修系统说明文档

## 1. 项目背景

本系统面向校园或社区的设备报修场景，目标是提供一个高效、透明、可追踪的工单管理流程，提升后勤服务效率并改善用户体验。

## 2. 角色与职责

- 普通用户：提交故障信息、查看工单进度、评价维修服务。
- 维修人员：接单处理、更新工单状态、签到打卡、记录维修过程。
- 管理员：派发工单、调度人员、查看数据统计与高频故障点。

## 3. 功能流程

### 3.1 用户端流程
1. 填写故障标题、描述、图片链接与位置。
2. 提交后生成工单，可在“工单列表”中查看状态变化。
3. 工单完成后可进行评价与反馈。

### 3.2 维修端流程
1. 维修人员进入工作台查看待处理工单。
2. 点击“开始处理”将工单状态置为处理中。
3. 现场打卡签到，记录签到位置与时间。
4. 处理完成后更新为“已完成”。

### 3.3 管理端流程
1. 查看统计数据（总工单、已完成、平均评分、高频故障点）。
2. 为工单派单并记录维修人员信息。
3. 根据统计数据优化人员调度与资源配置。

### 3.4 运营闭环看板
1. SLA 目标与超时预警自动计算。
2. 区域自治推荐（高频区域 + 负责人建议）。
3. 维修画像与绩效排行（完成数 + 平均耗时）。
4. 高频故障与预测性维护提示。
5. 评价回访与口碑提醒。
6. 跨部门升级风险统计（超时 48h）。

## 4. 自动派单与超时提醒

- **自动派单**：后端读取环境变量 `AUTO_ASSIGN_NAME` 和 `AUTO_ASSIGN_CONTACT`，自动将新工单分配给预设维修员并进入“处理中”。
- **超时提醒**：系统每小时扫描超过 24 小时未完成的工单，在后端日志输出提醒信息，可对接短信/IM 通知。
- **跨部门升级**：超过 48 小时未完成的工单会进入升级统计，便于联动后勤/安保。

## 5. 技术架构

- 前端：Vue 3 + TypeScript + Vant，移动端优先
- 后端：Spring Boot + Spring Data JPA
- 数据存储：MySQL（默认账号 root / 密码 123456），后续可增加 Redis 缓存与消息队列

## 6. 本地运行

### 后端

```bash
cd backend
mvn spring-boot:run
```

请确保 MySQL 已创建 `dgh` 数据库并使用默认账号密码 `root/123456`。

### 前端

```bash
cd frontend
npm install
npm run dev
```

## 7. 后续规划

- 加入登录、权限与多角色 RBAC 管理
- 引入工单 SLA 与通知策略
- 接入文件上传与位置地图组件
- 增加白天/夜晚双主题切换与夜间霓虹视觉提示

## 8. 业务分析与扩展规划（产品视角）

### 8.1 现有业务痛点与机会

- **用户端**：报修入口分散、描述不完整导致返工；进度可视化不足，无法预估处理时长。
- **维修端**：工单分配不均衡，缺乏“今日任务”优先级提示；现场签到与维修信息记录不够结构化。
- **管理端**：缺少资产视角与故障画像，派单依赖人工经验；缺乏与 SLA/绩效挂钩的闭环指标。

### 8.2 业务扩展方向（与设备报修主题一致）

1. **资产台账 + 设备画像**
   - 报修时自动关联设备编号、维保周期、历史故障记录。
   - 管理端展示设备健康度、故障频次、维护成本趋势。
2. **SLA 保障与智能派单**
   - 按工单等级配置响应时限、升级机制与超时预警。
   - 引入维修员技能标签、地理范围与工单负载的综合派单。
3. **维修过程结构化记录**
   - 维修端增加“故障原因/处理方案/备件使用/工时”字段。
   - 支持现场图片与语音备注，形成可复用的维修知识库。
4. **多渠道通知与用户满意度**
   - 支持短信/微信/邮件等多渠道进度通知。
   - 完工后自动发起满意度评价与复盘提醒。
5. **运营与决策看板**
   - 管理端提供“高频故障热力图”“超时工单趋势”“维修员绩效排行”。
   - 支持按楼宇/区域/设备类型维度进行筛选分析。
6. **扩展到安全巡检与保养任务**
   - 将报修扩展为周期性巡检与保养工单，形成“报修 + 保养”双业务线。
   - 支持巡检路线、检查项模板与合规记录。

### 8.3 近期可落地的 MVP 优先级

- **P0**：资产台账关联 + 工单 SLA 计时 + 多渠道通知
- **P1**：维修知识库 + 绩效看板
- **P2**：巡检保养任务 + 预测性维护（基于历史数据）

## 9. 新增接口说明

- `GET /api/stats/insights/summary`：首页温暖快报摘要
- `GET /api/ops/overview`：运营闭环看板指标（SLA、区域自治、维修画像、预测性维护、口碑、升级统计）
